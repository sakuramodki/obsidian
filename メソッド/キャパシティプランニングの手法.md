---
tags: メソッド, SRE, キャパシティプランニング, 需要予測, リソース管理, コスト最適化
---
# メソッド/キャパシティプランニングの手法

# 概要
将来のサービス需要を満たすために、必要なインフラストラクチャリソース（コンピューティング、ストレージ、ネットワークなど）の量と種類を予測し、計画的に準備・確保するための体系的なアプローチ。[[SRE(Site Reliability Engineering)]] において、サービスの信頼性、パフォーマンス、コスト効率を維持するために不可欠な活動。

# 前提となるモデル/理論とコンテキスト
* **モデル/理論**: [[SRE(Site Reliability Engineering)]], [[モデル/SLI_SLO_ErrorBudgetの原則]] (パフォーマンスSLO維持のため), 基本的な統計学・予測モデル
* **コンテキスト**: サービスの成長（オーガニック成長）、季節変動、特定のイベント（マーケティングキャンペーン、新機能リリース）などによってリソース需要が変動する状況。リソース不足によるサービス停止やパフォーマンス劣化、あるいは過剰なリソース確保によるコスト増を避けたい状況。リソース調達にはリードタイムが存在する場合。

# 具体的な手順・考慮事項
1.  **需要の理解と計測**:
    * サービス負荷の主要なドライバー（例: ユーザー数、リクエスト数、データ量）を特定する。
    * 現在のリソース使用量と主要ドライバーの関係を計測・分析する（負荷テストも活用）。
    * 適切な計測単位（例: 特定の作業単位あたりのCPU秒、秒間クエリ数あたりのRAM）を定義する。
2.  **需要予測**:
    * 過去のトレンド、ビジネス計画、季節性、予定されているイベントなどを考慮して、将来の需要（主要ドライバーの増加）を予測する。
    * オーガニック成長（自然増）と非オーガニック成長（イベント起因）を区別して予測する。
    * 複数の予測モデル（例: 線形回帰、時系列分析）を試し、最も確からしい予測を立てる。
3.  **リソース要件の計算**:
    * 予測された需要に基づき、必要な各リソース（CPUコア数, RAM容量, ディスク容量/IOPS, ネットワーク帯域など）の量を計算する。
    * リソース間の依存関係やボトルネックを考慮する。
4.  **バッファ（安全マージン）の確保**:
    * 予測の不確実性、予期せぬ需要増、障害時のフェイルオーバー容量などを考慮し、計算された要件に加えて適切なバッファを確保する。
5.  **プロビジョニング計画**:
    * リソースの調達リードタイム（物理サーバーの納品、クラウドインスタンスの起動時間など）を考慮して、必要な時期までにリソースが利用可能になるように調達・設定計画を立てる。
6.  **継続的な監視と見直し**:
    * 実際の需要とリソース使用量を継続的に監視し、予測との乖離を分析する。
    * 定期的に（例: 四半期ごと）キャパシティプランを見直し、必要に応じて予測モデルやリソース計画を修正する。
7.  **コスト意識**:
    * リソースの利用効率を監視し、過剰なリソースがないか、よりコスト効率の高い構成がないかを検討する。
    * クラウド環境などでは、予約インスタンスやスポットインスタンスの活用なども検討する。