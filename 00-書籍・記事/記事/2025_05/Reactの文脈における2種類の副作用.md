---
title: Reactの文脈における2種類の副作用
url: https://zenn.dev/uhyo/articles/react-two-side-effects
author: uhyo
published_date: 2025-05-02
tags:
  - ブログ
  - 概念
  - React
  - 副作用
  - テクノロジーマネージメント
aliases:
  - useEffect
source: "[書籍名 Chapter X / Blog URL]"
---
# 要約

useEffectにおけるfetchなど副作用がある操作をするべきではないという意見。
- useEffectはコンポーネントの**副作用**を記述するためのフックである。
	- **コンポーネントの作用は、コンポーネントがマウントされている間だけ有効である**。つまり、コンポーネントがアンマウントされると副作用も消える。
	- **コンポーネントの作用は、コンポーネントのpropsやステートを入力とする純粋な計算により決まる**。すなわち、副作用の内容もコンポーネントのpropsやステートに基づいて決まる必要があるということです。
- Reactでは[コンポーネントは純粋に保つべき](https://ja.react.dev/learn/keeping-components-pure)であり、コンポーネント内に直接**副作用**を記述してはいけない。
	- 2つ目の **“副作用”** については、Reactに特有の概念ではなく、プログラム全般における用語としての副作用。

Reactの公式ドキュメントには、以下のような記述があります。
https://ja.react.dev/learn/keeping-components-pure#where-you-can-cause-side-effects
> 関数型プログラミングには純粋性が重要であるとはいえ、いつか、どこかの場所で、何らかのものが変化しなければなりません。むしろそれがプログラミングをする意味というものでしょう。これらの変化（スクリーンの更新、アニメーションの開始、データの変更など）は 副作用 **(side effect)** と呼ばれます。レンダーの最中には発生しない、「付随的」なものです。
> 
> React では、**副作用は通常、イベントハンドラの中に属します。**（中略）
> 
> いろいろ探してもあなたの副作用を書くのに適切なイベントハンドラがどうしても見つからない場合は、コンポーネントから返された JSX に `useEffect` 呼び出しを付加することで副作用を付随させることも可能です。これにより React に、その関数をレンダーの後（その時点なら副作用が許されます）で呼ぶように指示できます。**ただしこれは最終手段であるべきです。**

１つ目を副作用と呼ぶのがそもそも誤解の元で、あくまで「effect = 作用」をReactのライフサイクルで扱うものと考えた方が良い。
この考え方であれば「コンポーネント外部のステートを書き換える（副作用）」ものは多くが誤った使い方である事がわかる。

## 関連ノート (Related Notes)
- 

## 未解決の疑問/考察 (Open Questions/Thoughts)
表示する時にAPIからデータを引いてくるようなのは許されそうな気がする。
[suspense](https://zenn.dev/uhyo/books/react-concurrent-handson/viewer/what-is-suspense)とかを使うのかな？

## Geminiによる補足
(Geminiに質問した結果や要約などを記載)