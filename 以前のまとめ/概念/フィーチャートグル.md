---
tags: メソッド, プラットフォームマネジメント, リリース管理, DevOps
aliases: フィーチャーフラグ, Feature Toggle, Feature Flag
---

# 概要(内包)

ソフトウェアの特定の機能の有効/無効を実行時に動的に切り替えることができる仕組み。コードを変更・デプロイすることなく、設定変更だけで機能のオン/オフを制御できる。[[プラットフォームマネジメント]]において、[[フェイルファスト]]を支援し、リリースリスクを低減するための技術の一つ。

# この概念が適用されるコンテキスト

- 新機能の段階的リリース（[[カナリアリリース]]、パーセントリリース）。
- A/Bテストの実装。
- 開発中の未完成機能をマージしつつ、ユーザーには見せないようにする（Trunk Based Development）。
- 問題発生時に、特定の機能を即座に無効化する（キルスイッチ）。
- 特定のユーザー群（例: 内部テスター、有料会員）にのみ機能を公開する。

# メソッド

## 目的

- リリースとデプロイを分離し、安全かつ柔軟なリリース戦略を実現する。
- 新機能導入に伴うリスクを低減する。
- 開発プロセスを効率化する（例: 長期間生存するフィーチャーブランチを避ける）。
- 本番環境でのテストや段階的公開を容易にする。

## 手順/要素

1.  **トグルの実装**: コード内に、機能の実行を制御するための条件分岐（if文など）を埋め込み、その条件を外部の設定（設定ファイル、データベース、専用サービスなど）で管理する。
2.  **トグル管理**: フィーチャートグルの設定値を管理する仕組みを用意する。誰が、どの機能を、どの範囲（ユーザー、環境など）で有効にするかを制御できる必要がある。
3.  **トグルの評価**: アプリケーション実行時に、適切なトグル設定値を読み込み、機能の実行可否を判断する。
4.  **トグルのクリーンアップ**: 機能が安定し、全ユーザーに公開された後、不要になったトグルとその分岐コードを削除する。放置すると[[以前のまとめ/概念/技術的負債]]となる。

# 例(外延)

- LaunchDarkly, Flagsmith, Unleashなどのフィーチャーフラグ管理サービスの利用。
- 設定ファイルや環境変数で機能のオン/オフを切り替える。
- 特定のユーザーIDリストに基づいて機能の表示を切り替える。
