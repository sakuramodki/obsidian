---
tags: メソッド, ストリーム処理, 分散処理, フレームワーク
aliases: Flink
---

# メソッド: Apache Flink

## 概要
Apache Flinkは、[[Boundedストリーム vs Unboundedストリーム]]の両方に対して、[[ステートフルコンピューティング]]を行うためのオープンソースのストリーム処理フレームワークおよび分散処理エンジンです。高スループット、低レイテンシ、Exactly-Onceセマンティクスによる結果の正確性を特徴とします。

## 前提となるモデル/理論(L1)とコンテキスト
* **L1モデル:** [[ストリーム処理(データ)]], [[イベント駆動アーキテクチャ]], [[ステートフルコンピューティング]], [[分散ストリーム処理アーキテクチャ(Flink)]]
* **コンテキスト:**
    * **目的:** リアルタイム分析、継続的なETL、イベント駆動アプリケーションなど、データストリームに対する継続的かつ状態を保持した計算処理を行いたい。
    * **状況:** 大量のイベントデータが継続的に発生する。低遅延での処理結果が求められる。処理の途中で状態を管理する必要がある。耐障害性と結果の正確性が重要である。
    * **制約:** 分散環境での実行が前提となる場合が多い。状態管理や時間概念の理解が必要。

## 具体的な手順・考慮事項
1.  **環境構築:** Flinkクラスターをセットアップする（Standalone, YARN, Kubernetesなど）。
2.  **データソース(Source)の定義:** Kafka, Kinesis, ファイルシステムなど、処理対象のデータストリームがどこから来るかを定義する。
3.  **データ変換(Transformation)の実装:** FlinkのAPI ([[Flink_DataStream_API]] または [[Flink_Table_API_SQL]]) を用いて、ストリームデータに対する処理ロジック（フィルタリング, マッピング, 集計, [[Flink_ウィンドウ処理]], [[Flink_状態管理]]など）を記述する。
4.  **データシンク(Sink)の定義:** 処理結果をどこに出力するか（Kafka, データベース, ファイルシステムなど）を定義する。
5.  **ジョブのビルドとデプロイ:** 作成したアプリケーションコードをビルドし、FlinkクラスターのJobManagerにデプロイ（サブミット）する。
6.  **モニタリングと運用:** FlinkのWeb UIやメトリクスシステムを用いて、ジョブの実行状況、パフォーマンス、リソース使用量を監視する。必要に応じて[[Flink_チェックポイント]]やセーブポイントの設定を調整する。
7.  **考慮事項:**
    * **APIの選択:** アプリケーションの要件や開発者のスキルに応じて、DataStream APIかTable API/SQLかを選択する。
    * **状態管理:** どの状態バックエンド（メモリ, ファイルシステム, RocksDB）を使用するか、状態のサイズやアクセスパターンを考慮して選択する。
    * **時間セマンティクス:** [[ストリーム処理における時間概念]] (イベント時間/処理時間) のどちらを使用するかを決定し、適切に設定する。
    * **並列度:** ジョブの各オペレータの並列度を適切に設定し、パフォーマンスとリソース使用量のバランスをとる。
    * **耐障害性:** [[Flink_チェックポイント]]の間隔やモード（Exactly-Once / At-Least-Once）を設定する。